<!DOCTYPE html>
<html>

<head>
    {include file="common/resources" /}
    <link rel="stylesheet" href="/static/admin/menu/index.css">
    <script src="/static/admin/menu/index.js" type="text/javascript"></script>
</head>

<body class="layui-layout-body">
    <div class="layui-layout layui-layout-admin">
        {include file="common/header" /}
        {include file="common/menu" /}
        <!-- 内容主体区域 -->
        <div class="layui-body">
            <span class="layui-breadcrumb">
                <a href="javascript:;">控制台</a>
                <a href="javascript:;">菜单</a>
                <a><cite>菜单列表</cite></a>
            </span>
            <span class="layui-layout-right">
                <a class="layui-btn" href="{:url('create')}"><i class="layui-icon"></i>添加</a>
            </span>
            <div class="layui-tab layui-tab-card" lay-filter="menu">
                <ul class="layui-tab-title">
                    {foreach $top_menu as $value}
                    <li {if $menu_id==$value.id } class="layui-this" {/if} lay-id="{$value.id}">{$value.name}</li>
                    {/foreach}
                </ul>
                <div class="layui-tab-content" style="min-height: 150px;">
                    <table class="layui-table mt">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>菜单名称</th>
                                <th>图标</th>
                                <th>菜单地址</th>
                                <th>更新时间</th>
                                <th>添加时间</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            {foreach $list as $value}
                            <tr>
                                <td>{$value.id}</td>
                                <td>{$value.name}</td>
                                <td> <i class="layui-icon {$value.icon}"></i></td>
                                <td>{$value.link}</td>
                                <td>{$value.update_time}</td>
                                <td>{$value.create_time}</td>
                                <td>
                                    <div class="layui-table-cell laytable-cell-3-0-9">
                                        <a class="layui-btn layui-btn-normal layui-btn-xs"
                                            href="{:url('update',array('id'=>$value.id))}">
                                            <i class="layui-icon layui-icon-edit"></i>编辑
                                        </a>
                                        <a class="layui-btn layui-btn-danger layui-btn-xs tab_del"
                                            data-id="{$value.id}">
                                            <i class="layui-icon layui-icon-delete"></i>删除
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            {/foreach}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        {include file="common/footer" /}
    </div>
</body>
<script>
    layui.use(['layer', 'element'], function () {
        $(function () {
            var element = layui.element;
            element.on('tab(menu)', function () {
                let id = this.getAttribute('lay-id');
                window.location.href = "{:url('index')}" + "?menu_id=" + id
            });
        })
    });
</script>

</html>
